<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
   <meta http-equiv="content-type" content="text/html;charset=UTF-8">
   <style type="text/css">
   /*CSS stylesheet is based on killwing's flavored markdown style:https://gist.github.com/2937864*/body{    margin: 0 auto;    font: 13px/1.231 Helvetica, Arial, sans-serif;    color: #444444;    line-height: 1;    max-width: 960px;    padding: 5px;}h1, h2, h3, h4 {    color: #111111;    font-weight: 400;}h1, h2, h3, h4, h5, p {    margin-bottom: 16px;    padding: 0;}h1 {    font-size: 28px;}h2 {    font-size: 22px;    margin: 20px 0 6px;}h3 {    font-size: 21px;}h4 {    font-size: 18px;}h5 {    font-size: 16px;}a {    color: #0099ff;    margin: 0;    padding: 0;    vertical-align: baseline;}a:link,a:visited{ text-decoration:none;}a:hover{ text-decoration:underline;}ul, ol {    padding: 0;    margin: 0;}li {    line-height: 24px;    margin-left: 44px;}li ul, li ul {    margin-left: 24px;}ul, ol {    font-size: 14px;    line-height: 20px;    max-width: 540px;}p {    font-size: 14px;    line-height: 20px;    max-width: 540px;    margin-top: 3px;}pre {    padding: 0px 4px;    max-width: 800px;    white-space: pre-wrap;    font-family: Consolas, Monaco, Andale Mono, monospace;    line-height: 1.5;    font-size: 13px;    border: 1px solid #ddd;    background-color: #f7f7f7;    border-radius: 3px;}code {    font-family: Consolas, Monaco, Andale Mono, monospace;    line-height: 1.5;    font-size: 13px;    border: 1px solid #ddd;    background-color: #f7f7f7;    border-radius: 3px;}pre code {    border: 0px;}aside {    display: block;    float: right;    width: 390px;}blockquote {    border-left:.5em solid #40AA53;    padding: 0 2em;    margin-left:0;    max-width: 476px;}blockquote  cite {    font-size:14px;    line-height:20px;    color:#bfbfbf;}blockquote cite:before {    content: '\2014 \00A0';}blockquote p {      color: #666;    max-width: 460px;}hr {    height: 1px;    border: none;    border-top: 1px dashed #0066CC}button,input,select,textarea {  font-size: 100%;  margin: 0;  vertical-align: baseline;  *vertical-align: middle;}button, input {  line-height: normal;  *overflow: visible;}button::-moz-focus-inner, input::-moz-focus-inner {  border: 0;  padding: 0;}button,input[type="button"],input[type="reset"],input[type="submit"] {  cursor: pointer;  -webkit-appearance: button;}input[type=checkbox], input[type=radio] {  cursor: pointer;}/* override default chrome & firefox settings */input:not([type="image"]), textarea {  -webkit-box-sizing: content-box;  -moz-box-sizing: content-box;  box-sizing: content-box;}input[type="search"] {  -webkit-appearance: textfield;  -webkit-box-sizing: content-box;  -moz-box-sizing: content-box;  box-sizing: content-box;}input[type="search"]::-webkit-search-decoration {  -webkit-appearance: none;}label,input,select,textarea {  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;  font-size: 13px;  font-weight: normal;  line-height: normal;  margin-bottom: 18px;}input[type=checkbox], input[type=radio] {  cursor: pointer;  margin-bottom: 0;}input[type=text],input[type=password],textarea,select {  display: inline-block;  width: 210px;  padding: 4px;  font-size: 13px;  font-weight: normal;  line-height: 18px;  height: 18px;  color: #808080;  border: 1px solid #ccc;  -webkit-border-radius: 3px;  -moz-border-radius: 3px;  border-radius: 3px;}select, input[type=file] {  height: 27px;  line-height: 27px;}textarea {  height: auto;}/* grey out placeholders */:-moz-placeholder {  color: #bfbfbf;}::-webkit-input-placeholder {  color: #bfbfbf;}input[type=text],input[type=password],select,textarea {  -webkit-transition: border linear 0.2s, box-shadow linear 0.2s;  -moz-transition: border linear 0.2s, box-shadow linear 0.2s;  transition: border linear 0.2s, box-shadow linear 0.2s;  -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);  -moz-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);}input[type=text]:focus, input[type=password]:focus, textarea:focus {  outline: none;  border-color: rgba(82, 168, 236, 0.8);  -webkit-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 8px rgba(82, 168, 236, 0.6);  -moz-box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 8px rgba(82, 168, 236, 0.6);  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1), 0 0 8px rgba(82, 168, 236, 0.6);}/* buttons */button {  display: inline-block;  padding: 4px 14px;  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;  font-size: 13px;  line-height: 18px;  -webkit-border-radius: 4px;  -moz-border-radius: 4px;  border-radius: 4px;  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);  -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);  background-color: #0064cd;  background-repeat: repeat-x;  background-image: -khtml-gradient(linear, left top, left bottom, from(#049cdb), to(#0064cd));  background-image: -moz-linear-gradient(top, #049cdb, #0064cd);  background-image: -ms-linear-gradient(top, #049cdb, #0064cd);  background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0%, #049cdb), color-stop(100%, #0064cd));  background-image: -webkit-linear-gradient(top, #049cdb, #0064cd);  background-image: -o-linear-gradient(top, #049cdb, #0064cd);  background-image: linear-gradient(top, #049cdb, #0064cd);  color: #fff;  text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);  border: 1px solid #004b9a;  border-bottom-color: #003f81;  -webkit-transition: 0.1s linear all;  -moz-transition: 0.1s linear all;  transition: 0.1s linear all;  border-color: #0064cd #0064cd #003f81;  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);}button:hover {  color: #fff;  background-position: 0 -15px;  text-decoration: none;}button:active {  -webkit-box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);  -moz-box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);  box-shadow: inset 0 3px 7px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);}button::-moz-focus-inner {  padding: 0;  border: 0;}/* table  */table {    border-spacing: 0;    border: 1px solid #ccc;}td, th{    border: 1px solid #ccc;    padding: 5px;}/* code syntax highlight.Documentation: http://www.mdcharm.com/documentation/code_syntax_highlighting.html#custom_your_own */pre .literal,pre .comment,pre .template_comment,pre .diff .header,pre .javadoc {    color: #008000;}pre .keyword,pre .css .rule .keyword,pre .winutils,pre .javascript .title,pre .nginx .title,pre .subst,pre .request,pre .status {    color: #0000FF;    font-weight: bold}pre .number,pre .hexcolor,pre .python .decorator,pre .ruby .constant {    color: #0000FF;}pre .string,pre .tag .value,pre .phpdoc,pre .tex .formula {    color: #D14}pre .title,pre .id {    color: #900;    font-weight: bold}pre .javascript .title,pre .lisp .title,pre .clojure .title,pre .subst {    font-weight: normal}pre .class .title,pre .haskell .type,pre .vhdl .literal,pre .tex .command {    color: #458;    font-weight: bold}pre .tag,pre .tag .title,pre .rules .property,pre .django .tag .keyword {    color: #000080;    font-weight: normal}pre .attribute,pre .variable,pre .lisp .body {    color: #008080}pre .regexp {    color: #009926}pre .class {    color: #458;    font-weight: bold}pre .symbol,pre .ruby .symbol .string,pre .lisp .keyword,pre .tex .special,pre .prompt {    color: #990073}pre .built_in,pre .lisp .title,pre .clojure .built_in {    color: #0086b3}pre .preprocessor,pre .pi,pre .doctype,pre .shebang,pre .cdata {    color: #999;    font-weight: bold}pre .deletion {    background: #fdd}pre .addition {    background: #dfd}pre .diff .change {    background: #0086b3}pre .chunk {    color: #aaa}pre .markdown .header {    color: #800;    font-weight: bold;}pre .markdown .blockquote {    color: #888;}pre .markdown .link_label {    color: #88F;}pre .markdown .strong {    font-weight: bold;}pre .markdown .emphasis {    font-style: italic;}
   </style>
   
   
</head>
<body>
    <h1>JDC 前端 JavaScript 代码规范</h1>

<p>本规范的目标是使 JavaScript 代码风格保持一致，有助于写出质量高、错误少、易于维护及团队协作的程序。</p>

<p>标准委员会（<a href="mailto:fe-codestyle@jd.com">fe-codestyle@jd.com</a>）参与规则制定人员：</p>

<ul>
<li>罗均波 （<a href="mailto:luojunbo@jd.com">luojunbo@jd.com</a>）</li>
<li>刘威 （<a href="mailto:liuwei1@jd.com">liuwei1@jd.com</a>）</li>
<li>陈晓春 （<a href="mailto:chenxiaochun@jd.com">chenxiaochun@jd.com</a>）</li>
<li>巫燿恒 （<a href="mailto:wuyaoheng@jd.com">wuyaoheng@jd.com</a>）</li>
<li>王少星 （<a href="mailto:wangshaoxing@jd.com">wangshaoxing@jd.com</a>）</li>
<li>冯伟平 （<a href="mailto:fengweiping@jd.com">fengweiping@jd.com</a>）</li>
<li>佟恩 （<a href="mailto:tongen@jd.com">tongen@jd.com</a>）</li>
<li>李春来 （<a href="mailto:lichunlai@jd.com">lichunlai@jd.com</a>）</li>
<li>石建国 （<a href="mailto:bjshijianguo@jd.com">bjshijianguo@jd.com</a>）</li>
<li>王戈 （<a href="mailto:wangge1@jd.com">wangge1@jd.com</a>）</li>
<li>周涛 （<a href="mailto:yfzhoutao@jd.com">yfzhoutao@jd.com</a>）</li>
</ul>

<h2><a name='table-of-contents'>内容列表</a></h2>

<ol>
<li><a href="#file">文件</a></li>
<li><a href="#indent">缩进</a></li>
<li><a href="#space">空格</a></li>
<li><a href="#newline">换行</a></li>
<li><a href="#statement">语句</a></li>
<li><a href="#variables">变量</a></li>
<li><a href="#functions">函数</a></li>
<li><a href="#comments">注释</a></li>
<li><a href="#others">其它</a></li>
</ol>

<h2><a name='file'>文件</a></h2>

<ul>
<li><p>JavaScript 文件使用无 BOM 的 UTF-8 编码。</p>

<blockquote>
<p>为什么? UTF-8 编码具有更广泛的适应性。BOM 在使用程序或工具处理文件时可能造成不必要的干扰，比如Mac系统中的<a href="http://www.cnblogs.com/snandy/p/4424970.html" target="_blank">换行符问题</a>。</p>
</blockquote></li>
</ul>

<h2><a name='indent'>缩进层次</a></h2>

<ul>
<li><p>缩进层级：使用 4 个空格， 不允许使用 2 个空格或 tab。</p>

<blockquote>
<p>switch 下的 case 和 default 必须增加一个缩进层级。</p>
</blockquote>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span> {</span>
∙∙var name;
}
// good
<span class="keyword">function</span> fn() {
∙∙∙∙var name;
}
</code></pre>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">switch</span> (vs) {
<span class="keyword">case</span> <span class="string">'1'</span>:
    <span class="comment">// do...</span>
    <span class="keyword">break</span>;
<span class="keyword">case</span> <span class="string">'2'</span>:
    <span class="comment">// do...</span>
    <span class="keyword">break</span>;
<span class="keyword">default</span>:
    <span class="comment">// do...</span>
}

<span class="comment">// good</span>
<span class="keyword">switch</span> (vs) {
    <span class="keyword">case</span> <span class="string">'1'</span>:
        <span class="comment">// do...</span>
        <span class="keyword">break</span>;
    <span class="keyword">case</span> <span class="string">'2'</span>:
        <span class="comment">// do...</span>
        <span class="keyword">break</span>;
    <span class="keyword">default</span>:
        <span class="comment">// do...</span>
}
</code></pre></li>
</ul>

<h2><a name='space'>空格</a></h2>

<ul>
<li><p>关键字 <code>if</code>、 <code>else</code>、 <code>switch</code>、 <code>case</code>、 <code>for</code>、 <code>while</code> 和 <code>:</code> 后加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">if</span>(a &gt; b) {

}
<span class="comment">// good</span>
<span class="keyword">if</span> (a &gt; b) {

}

<span class="comment">// bad</span>
<span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {
    <span class="comment">// ...</span>
}
<span class="comment">// good</span>
<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {
    <span class="comment">// ...</span>
}
</code></pre></li>
<li><p>赋值运算符 <code>=</code> 两边各加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
name=<span class="string">'John'</span>;

<span class="comment">// good</span>
name = <span class="string">'John'</span>;
</code></pre></li>
<li><p>两元运算符（<code>==</code>, <code>&gt;</code>, <code>&lt;</code>等）两边各加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">if</span> (a==b) {

}

<span class="comment">// good</span>
<span class="keyword">if</span> (a == b) {

}
</code></pre></li>
<li><p>函数参数之间加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">ajax</span><span class="params">(url,param,success)</span> {</span>
    <span class="comment">// ...</span>
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">ajax</span><span class="params">(url, param, success)</span> {</span>
    <span class="comment">// ...</span>
}
</code></pre></li>
<li><p>一元运算符（<code>++</code>，<code>--</code>）前后不加空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
++ sum;
total --;

<span class="comment">// good</span>
++sum;
total--;
</code></pre></li>
<li><p>左大括号前加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">ajax</span><span class="params">(url, param, success)</span>{</span>
    <span class="comment">// ...</span>
}
<span class="keyword">if</span> (a &gt; b){

}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">ajax</span><span class="params">(url, param, success)</span> {</span>
    <span class="comment">// ...</span>
}
<span class="keyword">if</span> (a &gt; b) {

}
</code></pre></li>
<li><p>数组成员间 <code>,</code> 后加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];

<span class="comment">// good</span>
<span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];
</code></pre></li>
<li><p>小括号作为函数调用时 <code>函数名</code> 与 <code>左小括号</code> 之间不加空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
func ();

<span class="comment">// good</span>
func();
</code></pre></li>
<li><p>小括号作为强制运算符时左括号前加 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">return</span>(x + y);

<span class="comment">// good</span>
<span class="keyword">return</span> (x + y);
</code></pre></li>
<li><p>起首的大括号跟在关键字的后面，且大括号前留有 1 个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">if</span> (a &gt; b)
{
    <span class="comment">// ...</span>
}
<span class="comment">// good</span>
<span class="keyword">if</span> (a &gt; b) {
    <span class="comment">// ...</span>
}

<span class="comment">// bad</span>
dog.set(<span class="string">'attr'</span>,{
    age: <span class="string">'1 year'</span>,
    breed: <span class="string">'Bernese Mountain Dog'</span>
});
<span class="comment">// good</span>
dog.set(<span class="string">'attr'</span>, {
    age: <span class="string">'1 year'</span>,
    breed: <span class="string">'Bernese Mountain Dog'</span>
});
</code></pre></li>
</ul>

<h2><a name='newline'>换行</a></h2>

<ul>
<li><p>每个独立语句结束后必须换行。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
user.setCode(<span class="number">1</span>); user.setName(<span class="string">'admin'</span>); user.setPwd(<span class="string">'123456'</span>);

<span class="comment">// good</span>
user.setCode(<span class="number">1</span>);
user.setName(<span class="string">'admin'</span>);
user.setPwd(<span class="string">'123456'</span>);
</code></pre></li>
<li><p>行的长度不应超过80个字符，超过后需要手动将一行拆成两行。下一行增加两级缩进（8个空格）。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
doSomething(argument1, argument2, argument3, argument4, argument5);
doSomething(argument1, argument2, argument3, argument4, 
    argument5);

<span class="comment">// good</span>
doSomething(argument1, argument2, argument3, argument4, 
        argument5);
</code></pre></li>
<li><p>空行，函数之间、函数的局部变量和第一条语句之间加空行。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">fetch</span><span class="params">()</span> {</span>
}
<span class="function"><span class="keyword">function</span> <span class="title">getUser</span> {</span>
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">fetch</span><span class="params">()</span> {</span>
}

<span class="function"><span class="keyword">function</span> <span class="title">getUser</span> {</span>
}
</code></pre>

<blockquote>
<p>[建议] 把不同业务逻辑的语句使用空行隔开，更易阅读。</p>
</blockquote></li>
</ul>

<h2><a name='statement'>语句</a></h2>

<ul>
<li><p>语句末尾始终使用分号，不要依赖于引擎隐式插入（Automatic Semicolon Insertion，ASI）。</p>

<blockquote>
<p><code>function</code>、 <code>for</code>、 <code>if</code>、 <code>switch</code>、 <code>try</code>、 <code>while</code> 语句块末尾不需要加分号。</p>
</blockquote>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span> {</span>
    <span class="comment">// ...</span>
};
<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span> {</span>
    <span class="comment">// ...</span>
}

<span class="comment">// bad</span>
<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {
    <span class="comment">// ...</span>
};
<span class="comment">// good</span>
<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) {
    <span class="comment">// ...</span>
}
</code></pre></li>
<li><p>花括号对齐方式，将花括号放置在第一句代码的末尾。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">if</span> (boo) 
{
    <span class="comment">// do...</span>
}
<span class="keyword">else</span>
{
    <span class="comment">// do...</span>
}

<span class="comment">// good</span>
<span class="keyword">if</span> (boo) {
    <span class="comment">// do...</span>
} <span class="keyword">else</span> {
    <span class="comment">// do...</span>
}
</code></pre></li>
<li><p>所有的语句块，即使只有一行，也不得省略块 {...}。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">if</span> (condition) callFunc();
<span class="keyword">if</span> (condition)
    callFunc();

<span class="comment">// good</span>
<span class="keyword">if</span> (condition) {
    callFunc();
}
</code></pre></li>
</ul>

<h2><a name="variables">变量</a></h2>

<ul>
<li><p>始终使用 <code>var</code> 来声明变量，否则会产生全局变量，避免污染全局命名空间。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
superPower = <span class="keyword">new</span> SuperPower();

<span class="comment">// good</span>
<span class="keyword">var</span> superPower = <span class="keyword">new</span> SuperPower();
</code></pre></li>
<li><p>命名采用驼峰式，第一个单词小写，之后的单词首字母大写。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> nickname = <span class="string">'John'</span>;
<span class="keyword">var</span> nick_name = <span class="string">'John'</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> nickName = <span class="string">'John'</span>;
</code></pre></li>
<li><p>常量名全部用大写字母，多个单词使用下划线 <code>_</code> 连接。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> pi = <span class="number">3.1415926</span>;
<span class="comment">// good</span>
<span class="keyword">var</span> PI = <span class="number">3.1415926</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> maxCount = <span class="number">100</span>;
<span class="comment">// good</span>
<span class="keyword">var</span> MAX_COUNT = <span class="number">100</span>;
</code></pre>

<blockquote>
<p>常量：指数学(圆周率/自然对数)，物理领域（光速/质子磁矩/元电荷），计算机领域（HTTP状态码/URL），这些变量声明后不再改变。</p>
</blockquote></li>
<li><p>类（构造器）名首字母大写，用名词。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">person</span><span class="params">(name, age)</span> {</span>
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>.age = age;
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">Person</span><span class="params">(name, age)</span> {</span>
    <span class="keyword">this</span>.name = name;
    <span class="keyword">this</span>.age = age;
}
</code></pre></li>
<li><p>避免单个字符名，变量名应具有描述意义（计数器 <code>i,j,k</code> 除外）。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">q</span><span class="params">()</span> {</span>
    <span class="comment">// ...stuff...</span>
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">query</span><span class="params">()</span> {</span>
    <span class="comment">// ..stuff..</span>
}
</code></pre></li>
<li><p>声明且赋值时使用多个 <code>var</code> 及换行。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> items = getItems(),
    goSportsTeam = <span class="literal">true</span>,
    dragonball = <span class="string">'z'</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> items = getItems();
<span class="keyword">var</span> goSportsTeam = <span class="literal">true</span>;
<span class="keyword">var</span> dragonball = <span class="string">'z'</span>;
</code></pre></li>
<li><p>只声明不赋值时可以使用单个 <code>var</code> 。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> top;
<span class="keyword">var</span> left;   
<span class="keyword">var</span> width;
<span class="keyword">var</span> height;

<span class="comment">// good</span>
<span class="keyword">var</span> top, left, width, height;
</code></pre></li>
<li><p>分组变量声明，变量多且有明显相关性时。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> x, y, z, width, height;

<span class="comment">// good</span>
<span class="keyword">var</span> x, y, z;
<span class="keyword">var</span> width, height;
</code></pre></li>
<li><p>就近声明，用时声明，更自然的在视角范围内。</p>

<blockquote>
<p>为什么？ 当函数行数较多时，如果把变量声明全部放在顶部，阅读或修改时还需要滚动到顶部，甚为不便。</p>
</blockquote>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> i, len;
<span class="keyword">var</span> goSportsTeam = <span class="literal">true</span>;
<span class="keyword">var</span> dragonball = <span class="string">'z'</span>;

<span class="comment">// ...</span>

<span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) {
    <span class="comment">// ...</span>
}

<span class="comment">// good</span>
<span class="keyword">var</span> goSportsTeam = <span class="literal">true</span>;
<span class="keyword">var</span> dragonball = <span class="string">'z'</span>;

<span class="comment">// ...</span>

<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = arr.length; i &lt; len; i++) {
    <span class="comment">// ...</span>
}
</code></pre></li>
<li><p>声明时变量之间存在依赖关系时，最后声明未赋值的变量，当你想引用之前已赋值变量的时候很有用。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> width;
<span class="keyword">var</span> height;
<span class="keyword">var</span> $div = $(<span class="string">'#nav'</span>);

<span class="comment">// good</span>
<span class="keyword">var</span> $div = $(<span class="string">'#nav'</span>);
<span class="keyword">var</span> width = $div.width();
<span class="keyword">var</span> height = $div.height();

</code></pre></li>
<li><p>变量应先声明后使用，避免 <code>变量提升</code> 现象产生。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span> {</span>
    doStaff(width, height);
    <span class="keyword">var</span> width = $div.width() || <span class="number">0</span>;
    <span class="keyword">var</span> height = $div.height() || <span class="number">0</span>;
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">fn</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> width = $div.width() || <span class="number">0</span>;
    <span class="keyword">var</span> height = $div.height() || <span class="number">0</span>;
    doStaff(width, height);
}
</code></pre></li>
<li><p>使用前缀，不采用后缀。常见前缀参考</p>

<table>
    <thead>
        <tr><td>前缀</td><td>类型</td><td>示例</td></tr>
    </thead>
    <tbody>
        <tr><td>is, can, has</td><td>Boolean</td><td>isPass</td></tr>
        <tr><td>reg</td><td>RegExp</td><td>regNum</td></tr>
        <tr><td>get</td><td>Getter</td><td>getName</td></tr>
        <tr><td>set</td><td>Setter</td><td>setName</td></tr>
        <tr><td>i, j, k</td><td>iterator</td><td></td></tr>
        <tr><td>el</td><td>HTMLElement</td><td>elNav</td></tr>
        <tr><td>$</td><td>jQuery Object</td><td>$nav</td></tr>
    </tbody>
</table></li>
</ul>

<p><strong><a href="#table-of-contents">返回列表</a></strong></p>

<h2><a name="functions">函数</a></h2>

<ul>
<li><p>函数的长度控制在 50 行以内。</p>

<blockquote>
<p>为什么？将过多的逻辑单元混在一个大函数中，难以维护。一个清晰易懂的函数应该完成单一的逻辑单元。复杂的操作应进一步分解，通过函数的调用来体现流程。</p>

<p>不可分割的特定算法逻辑允许例外。</p>
</blockquote></li>
<li><p>函数的参数控制在 5 个以内，过多参数会导致维护难度增大。</p>

<blockquote>
<p>为什么？ 有些函数的参数并非作为算法的输入，而是对算法的某些分支条件判断之用，此类参数建议通过一个JS对象 options 传递。</p>

<p>某些情况下，如使用 AMD/CMD Loader 的 require 加载多个模块时，其 callback 可能会存在较多参数，因此对函数参数的个数不做强制限制。</p>
</blockquote></li>
</ul>

<p><strong><a href="#table-of-contents">返回列表</a></strong> </p>

<h2><a name='comments'>注释</a></h2>

<ul>
<li><p>在单行注释符后留一个空格。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="comment">//this is comment</span>

<span class="comment">// good</span>
<span class="comment">// this is comment</span>
</code></pre></li>
<li><p>在多行注释的结束符前留一个空格，使星号对齐。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="comment">/*
 * this is comment
*/</span>

<span class="comment">// good</span>
<span class="comment">/*
 * this is comment
 */</span>
</code></pre></li>
<li><p>文档或API使用双星号 <code>/**</code> 开始，用 <code>@</code> 符号表示属性（方法名/参数/返回值等）</p>

<blockquote>
<p>@ 的常见属性： class, constructor, method, param, return 等</p>
</blockquote>

<pre><code class="javascript"><span class="comment">/**
 * @method merge
 * @param  {Object} 被合并的对象，一个或多个
 * @return {Object} 返回新的合并后的对象
 *
 */
Y.merge = function() {
    // ...
    return dest;
}
</code></pre></li>
</ul>

<p><strong><a href="#table-of-contents">返回列表</a></strong></p>

<h2><a name='others'>其它</a></h2>

<ul>
<li><p>定义对象时将逗号放后面。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> hero = {
    firstName: <span class="string">'Bob'</span>
  , lastName: <span class="string">'Parr'</span>
  , heroName: <span class="string">'Mr. Incredible'</span>
  , superPower: <span class="string">'strength'</span>
};

<span class="comment">// good</span>
<span class="keyword">var</span> hero = {
  firstName: <span class="string">'Bob'</span>,
  lastName: <span class="string">'Parr'</span>,
  heroName: <span class="string">'Mr. Incredible'</span>,
  superPower: <span class="string">'strength'</span>
};

</code></pre></li>
<li><p>使用单引号定义字符串。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> name = <span class="string">"Capt. Janeway"</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> name = <span class="string">'Capt. Janeway'</span>;
</code></pre></li>
<li><p>超长字符串采用加号 <code>+</code>， 多行显示，换行后加两级缩进。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> errorMessage = <span class="string">'This is a super error that was thrown because of Batman. When you stop how Batman had anything to do with this, you would get nowhere fast.'</span>;

<span class="comment">// bad</span>
<span class="keyword">var</span> errorMessage = <span class="string">'This is a super error that was thrown because \
of Batman. When you stop how Batman had anything to do \
with this, you would get nowhere fast.'</span>;

<span class="comment">// good</span>
<span class="keyword">var</span> errorMessage = <span class="string">'This is a super error that was thrown because '</span> 
        + <span class="string">'of Batman. When you stop how Batman had anything to do '</span>
        + <span class="string">'with this, you would get nowhere fast.'</span>;
</code></pre></li>
<li><p>HTML属性使用双引号，即单引号在外层，双引号在内层。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="keyword">var</span> html = <span class="string">"&lt;a href='http://www.jd.com'&gt;京东&lt;/a&gt;";
// good
var html = '&lt;a href="http://www.jd.com"&gt;京东&lt;/a&gt;';
</code></pre></li>
<li><p>大量 HTML 的拼接使用前置加号</p>

<pre><code class="javascript"> <span class="keyword">var</span> theadHTML = <span class="string">''</span>
        +<span class="string">'&lt;thead&gt;'</span>
        +   <span class="string">'&lt;tr class="controls"&gt;&lt;th colspan="7"&gt;'</span>
        +       <span class="string">'&lt;span class="selectMonth"&gt;'</span>
        +           <span class="string">'&lt;select class="month"&gt;&lt;/select&gt;'</span>
        +       <span class="string">'&lt;/span&gt;'</span>
        +       <span class="string">'&lt;span class="slecteYear"&gt;'</span>
        +           <span class="string">'&lt;select class="year"&gt;&lt;/select&gt;'</span>
        +       <span class="string">'&lt;/span&gt;'</span>
        +   <span class="string">'&lt;/th&gt;&lt;/tr&gt;'</span>
        +   <span class="string">'&lt;tr class="days"&gt;'</span>
        +       <span class="string">'&lt;th class="J-sun"&gt;日&lt;/th&gt;'
        +       '&lt;th class="J-mon"&gt;一&lt;/th&gt;'
        +       '&lt;th class="J-tue"&gt;二&lt;/th&gt;'
        +       '&lt;th class="J-wed"&gt;三&lt;/th&gt;'
        +       '&lt;th class="J-thu"&gt;四&lt;/th&gt;'
        +       '&lt;th class="J-fri"&gt;五&lt;/th&gt;'
        +       '&lt;th class="J-sat"&gt;六&lt;/th&gt;'</span>
        +   '&lt;/tr&gt;'
        +'&lt;/thead&gt;' 

</code></pre></li>
<li><p>需要引用闭包外层的上下文 <code>this</code> 时，使用标识符 <code>me</code>、<code>self</code>、 <code>that</code>， 不使用 <code>_this</code>。</p>

<pre><code class="javascript"><span class="comment">// bad</span>
<span class="function"><span class="keyword">function</span> <span class="title">outer</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> _<span class="keyword">this</span> = <span class="keyword">this</span>;
    <span class="function"><span class="keyword">function</span> <span class="title">inner</span><span class="params">()</span> {</span>
        _<span class="keyword">this</span>.search();
    }
}

<span class="comment">// good</span>
<span class="function"><span class="keyword">function</span> <span class="title">outer</span><span class="params">()</span> {</span>
    <span class="keyword">var</span> me = <span class="keyword">this</span>;
    <span class="function"><span class="keyword">function</span> <span class="title">inner</span><span class="params">()</span> {</span>
        me.search();
    }
}
</code></pre></li>
</ul>

<p><strong><a href="#table-of-contents">返回列表</a></strong></p>

</body>
</html>